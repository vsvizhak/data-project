- name: "Create project directory"
  file:
    path: "{{ project_dir }}"
    state: directory
    owner: "{{ new_user }}"
    group: "{{ new_user }}"
    mode: "0755"

- name: "Ensure project directory ownership"
  file:
    path: "{{ project_dir }}"
    owner: "{{ new_user }}"
    group: "{{ new_user }}"
    recurse: true

- name: "Upload docker-compose.yml"
  copy:
    src: "{{ compose_src }}"
    dest: "{{ project_dir }}/docker-compose.yml"
    mode: "0644"

- name: "Upload .env"
  copy:
    src: "{{ env_src }}"
    dest: "{{ project_dir }}/.env"
    owner: "{{ new_user }}"
    group: "{{ new_user }}"
    mode: "0644"